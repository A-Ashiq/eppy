2014-08-28
----------
 
issue28

Following the examples for creating an airloop with hvacbuilder.makeairloop and with the hvacbuilder.replacebranch function does not seem to work.

Traceback (most recent call last):
File "D:\projects\ASHRAE MaxTech 1651\Task2e\HS18-RadiantDOAS\eppybug\airloopbug.py", line 30, in 
newDOASsupplyBranch = hvacbuilder.replacebranch(airloop_idf, doasLoop, mainSupplyBranch, doasListOfComp, fluid='Air')
File "c:/eppy046/hvacbuilder.py", line 393, in replacebranch
connectcomponents(idf, components, fluid=fluid)
File "c:/eppy046/hvacbuilder.py", line 326, in connectcomponents
outletnodename = getnodefieldname(thiscomp, "Outlet_Node_Name", fluid)
File "c:/eppy046/hvacbuilder.py", line 309, in getnodefieldname
nodename = nodenames[0]
IndexError: list index out of range

The test file is:

import sys
import os
from StringIO import StringIO

pathto = "c:/eppy046/"
sys.path.append(pathto)

import modeleditor
from modeleditor import IDF
import hvacbuilder

iddfile = "c:/eppy046/resources/iddfiles/Energy+V8_1_0.idd"
IDF.setiddname(iddfile)

airloop_idf = IDF(StringIO(''))
loopname = "a_loop"
sloop = ['sb0', ['sb1', 'sb2', 'sb3'], 'sb4'] # supply side of the loop
#sloop = ['sb0', ['sb1',], 'sb4'] # supply side of the loop
dloop = ['zone1', 'zone2', 'zone3'] # zones on the demand side
doasLoop = hvacbuilder.makeairloop(airloop_idf, loopname, sloop, dloop)
airloop_idf.saveas("a_loop.idf")

dAirLpHvOAsys = airloop_idf.newidfobject("AirLoopHVAC:OutdoorAirSystem".upper(), 'DOAS_OA')
dCoilSysDX = airloop_idf.newidfobject("CoilSystem:Cooling:DX".upper(), 'DOAS_CoolCoil')
dCoilHtWtr = airloop_idf.newidfobject("Coil:Heating:Water".upper(), 'DOAS_HeatCoil')
dFanCV = airloop_idf.newidfobject("Fan:ConstantVolume".upper(), 'DOAS_Fan')
doasListOfComp = [dAirLpHvOAsys,dCoilSysDX,dCoilHtWtr,dFanCV]
mainSupplyBranch = airloop_idf.getobject('BRANCH', 'sb1') # args are (key, name)

The following line causes a Eppy error.

newDOASsupplyBranch = hvacbuilder.replacebranch(airloop_idf, doasLoop, mainSupplyBranch, doasListOfComp, fluid='Air')

Please let me know how quickly you can fix or if you know a work around.



